<p id="hitokoto_text"></p>
<script>;var motto;function hitokoto(){fetch('https://v1.hitokoto.cn').then(response=>response.json()).then(data=>{document.getElementById('hitokoto_text').innerText=(text=>{motto=text;let split=/[,，]/;if(/.+?[;.；。].+?/.test(motto))split=/[;.；。]/;let len=motto.split(split).length;if(len>3)return motto;let knife=new RegExp(split,'g');return motto.replace(knife,'，\n')})(data.hitokoto);set_limit()})}function set_limit(){let style=window.getComputedStyle(document.getElementById('hitokoto_text'));let line=style.height.replace('px','')/style.fontSize.replace('px','');if(line>=4)document.getElementById('hitokoto_text').innerText=motto}function set_icon(){return;let boxes=document.getElementsByClassName('box');let ans='';for(let index=0;index<boxes.length;index++){let item=boxes[index];let getImg=new Image();getImg.src=item.getElementsByTagName('div')[0].style.backgroundImage.slice(5,-2);if(!getImg.complete){let url="url('http://"+getImg.src.replace(/.+\//,'').replace(".png",'')+"/favicon.ico')";console.log(url);item.getElementsByTagName('div')[0].style.backgroundImage=url}}}hitokoto();setTimeout(set_icon,100);
</script>
